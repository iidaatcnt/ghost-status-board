# Ghost Status Board - 仕様書

## 1. プロジェクト概要

### 1.1. プロジェクト名
Ghost Status Board

### 1.2. 目的
オンラインでチームやコミュニティのメンバーが、自身の現在の状況（ステータス）をリアルタイムで共有し、一目で把握できるようにするWebサイト。駅の伝言板のように、時間が経つとメッセージが薄くなり、最終的に消えることで、常に最新の情報が保たれる。

## 2. 主要機能

### 2.1. ステータス表示機能
*   メイン画面に、投稿されたすべてのステータスが一覧で表示される。
*   各ステータスには以下の情報が含まれる:
    *   **投稿者名:** ステータスを投稿したユーザーの識別名。
    *   **ステータス内容:** 自由形式のメッセージ、または選択肢から選ばれた内容。
    *   **最終更新日時:** ステータスが最後に更新されたタイムスタンプ。
*   ステータスは新しいものから順に表示される（降順）。
*   リアルタイム更新: ページをリロードしなくても、新しいステータスや更新が自動的に反映される。
*   **時間経過による視覚的フェードアウト:**
    *   投稿されたステータスは、時間が経過するにつれて徐々に色が薄くなる（透明度が上がる）。
    *   例: 投稿から1時間で完全に不透明、2時間で50%透明、3時間でほぼ透明。
    *   フェードアウトの期間は設定可能とする（例: 3時間で完全に薄くなる）。

### 2.2. ステータス投稿・更新機能
*   **投稿者名の入力:** ステータスを投稿する際に、自身の名前やニックネームを入力するフィールドがある。
*   **パスワード/PINの入力:**
    *   ステータスを投稿する際に、そのステータスを後で編集・削除するためのパスワードまたはPIN（4桁の数字など）を設定する。
    *   このパスワード/PINは、同じ投稿者名でログインする際に必要となる。
    *   パスワード/PINはハッシュ化して保存する。
*   **ステータス入力形式の選択:**
    *   **自由形式メッセージ:** 短いテキストメッセージを入力できるテキストエリア。文字数制限を設ける（例: 100文字以内）。
    *   **選択肢からの選択:** 事前に定義されたステータスオプションのリストから一つを選択できるドロップダウンまたはラジオボタン。
*   **ステータス更新:** 同じ投稿者名とパスワード/PINでログインし、ステータスを投稿すると、その投稿者の最新のステータスが上書き更新される。
*   「ステータスを更新」ボタン: 入力された内容でステータスを投稿または更新する。

### 2.3. ステータス削除機能
*   **本人による削除:** 投稿者名とパスワード/PINでログインしている場合、自身の投稿したステータスに「削除」ボタンが表示され、クリックすることで即座に削除できる。
*   **自動削除:** 設定された期間（例: 投稿から4時間後）が経過したステータスは、システムによって自動的に削除される。

## 3. ユーザー認証/識別

### 3.1. 簡易認証方式
*   ユーザーは「投稿者名」と「パスワード/PIN」を入力して「ログイン」する。
*   ログイン状態はセッションクッキー（HTTP Only Cookie）に保存されたJWT（JSON Web Token）で保持される。
*   ログイン中は、自身の投稿に「削除」ボタンが表示され、新しいステータスを投稿すると既存のものが更新される。
*   パスワード/PINは、セキュリティを考慮し、ハッシュ化して保存する（bcryptを使用）。

## 4. ステータス選択肢の例

*   対応可能 (Available)
*   取り込み中 (Busy)
*   会議中 (In a meeting)
*   外出中 (Out of office)
*   休憩中 (On break)
*   リモートワーク中 (Working remotely)
*   体調不良 (Sick leave)
*   休暇中 (On vacation)

## 5. 技術的考慮事項

### 5.1. フレームワーク・言語
*   **フロントエンド:** Next.js (TypeScript, React, Tailwind CSS, App Router)
*   **バックエンド:** Next.js API Routes (TypeScript)

### 5.2. デプロイ環境
*   Vercel

### 5.3. データベース
*   ステータス情報を保存するためのデータベース（例: PostgreSQL, MongoDBなど、Vercelと連携しやすいもの）。
*   各ステータスエントリには、`投稿者名`、`パスワードハッシュ`、`ステータスタイプ`（メッセージ/選択肢）、`内容`、`最終更新日時`などのフィールドが必要。

### 5.4. リアルタイム通信
*   WebSocket (例: Socket.IO) を使用し、サーバーからクライアントへリアルタイムで更新をプッシュする。

### 5.5. 認証関連ライブラリ
*   `bcrypt` (PINのハッシュ化のため)
*   `jsonwebtoken` (JWTの生成と検証のため)
*   `cookie` (Next.jsのAPI RouteでCookieを操作するため)

### 5.6. その他
*   CSS `opacity` プロパティとJavaScriptのタイマー機能を用いて、時間経過によるフェードアウトを実装。
*   自動削除のためのバックグラウンドジョブ（例: `cron` ジョブ、または定期的に実行されるスクリプト）を実装。

## 6. ユーザーインターフェース (UI) / ユーザーエクスペリエンス (UX) 概念

### 6.1. メイン画面
*   上部に「Ghost Status Board」などのタイトル。
*   その下に、ステータス投稿・更新用のフォームを配置。
    *   「あなたの名前/ニックネーム」入力欄。
    *   「パスワード/PIN」入力欄（新規投稿時とログイン時に使用）。
    *   「メッセージ」と「選択肢から選ぶ」を切り替えるタブまたはラジオボタン。
    *   「メッセージ」選択時はテキストエリアが表示。
    *   「選択肢から選ぶ」選択時はドロップダウンまたは選択肢リストが表示。
    *   「ステータスを更新」ボタン。
*   フォームの下に、投稿されたステータスの一覧をカード形式または行形式で表示。
    *   例: `[山田太郎]` - `レポート作成中` - `2025/07/24 10:30`
    *   ログイン中のユーザーの投稿には、その行の右端などに「削除」ボタンが表示される。
    *   フェードアウトの進行度合いに応じて、文字の色や背景色が薄くなる視覚効果。
